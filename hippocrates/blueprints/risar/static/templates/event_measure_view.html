<div class="modal-body">
    <tabset>
        <tab heading="Просмотр информации о мероприятии" select="setTab(1)">
            <form class="form-horizontal">
                <div class="form-group">
                    <label for="measure_type" class="col-sm-3 control-label">Схема</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_type" ng-bind="getSchemeInfo()"></span>
                    </div>
                </div>
                <hr>
                <div class="form-group">
                    <label for="measure_type_name" class="col-sm-3 control-label">Тип мероприятия</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_type_name" ng-bind="event_measure.measure.measure_type.name"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure" class="col-sm-3 control-label">Мероприятие</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure" ng-bind="event_measure.measure.name"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure_status" class="col-sm-3 control-label">Статус</label>
                    <div class="col-sm-9 form-control-static">
                        <event-measure-status id="measure_status" status="event_measure.status"></event-measure-status>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cancel_reason" class="col-sm-3 control-label">Причина отказа</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="cancel_reason" ng-bind="event_measure.cancel_reason.name"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure_dates" class="col-sm-3 control-label">Период выполнения</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_dates" ng-bind="getMeasureDateRange()"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure_exec_date" class="col-sm-3 control-label">Дата выполнения</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_exec_date" ng-bind="getRealizationDate()"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure_create" class="col-sm-3 control-label">Создано</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_create" ng-bind="getMeasureCreateInfo()"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure_modify" class="col-sm-3 control-label">Изменено</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_modify" ng-bind="getMeasureModifyInfo()"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="measure_comment" class="col-sm-3 control-label">Комментарий</label>
                    <div class="col-sm-9 form-control-static">
                        <span id="measure_comment" ng-bind="getAppointmentComment()"></span>
                    </div>
                </div>
            </form>
        </tab>
        <tab heading="Направление по мероприятию" select="setTab(2)" ng-attr-disabled="[[!canReadEmAppointment()]]">
            <div class="modal-body">
            <section class="content">
                <div class="row">
                    <div class="col-md-12">
                        <wm-action-layout ng-if="!isDisabledAppointment()" action="appointment_action"></wm-action-layout>
                        <span ng-if="isDisabledAppointment()">
                            <b>Для данного мероприятия не были внесены данные направления</b>
                        </span>
                    </div>
                </div>
            </section>
            </div>
        </tab>
        <tab heading="Результаты по мероприятию" select="setTab(3)" ng-attr-disabled="[[!canReadEmResult()]]">
            <div class="modal-body">
            <section class="content">
                <div class="row">
                <div class="col-md-12">
                    <wm-action-layout ng-if="em_result" action="em_result_action"></wm-action-layout>
                    <table class="table table-condensed" ng-show="filesTableVisible()">
                        <thead>
                            <tr>
                                <th>Наименование</th>
                                <th>Файл</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="attach in em_result.attached_files">
                                <td><input type="text" class="form-control" ng-model="attach.file_meta.name" ng-required="true"
                                    ng-disabled="true"></td>
                                <td>
                                    <a ng-href="[[attach.file_meta.url]]" target="_blank" class="btn btn-sm btn-primary" title="Скачать"
                                        ng-disabled="!canReadEmResult()">
                                        <i class="fa fa-download"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <span ng-if="!em_result">
                        <b>По данному мероприятию результатов нет</b>
                    </span>
                </div>
                </div>
            </section>
            </div>
        </tab>
    </tabset>
</div>
<div class="modal-footer">
    <ui-print-button ng-if="tabNum == 2" ps="ps" resolve="ps_resolve()" fast-print="true" class="pull-left"
                     ext-disabled="!canPrintAppointment() || isDisabledAppointment()" lazy-load-context="[[getAppointmentContextName()]]"
                     before-print="createAppointmentIfNeed()"></ui-print-button>
    <ui-print-button ng-if="tabNum == 3" ps="ps" resolve="ps_resolve()" fast-print="true" class="pull-left"
                     ext-disabled="!canPrintEmResult" lazy-load-context="[[getEmResultContextName()]]"
                     before-print="createEmResultIfNeed()"></ui-print-button>
    <button type="button" class="btn btn-default" ng-disabled="!canEditEmAppointment() || isDisabledAppointment()"
            ng-click="editAppointment()"
            ng-if="tabNum == 2">Редактировать направление</button>
    <button type="button" class="btn btn-default" ng-disabled="!canEditEmResult()"
            ng-click="editEmResults()"
            ng-if="tabNum == 3">Редактировать результаты</button>
    <button type="button" class="btn btn-success pull-left" ng-disabled="!canExecuteEm()"
            ng-click="$close('execute')"
            ng-if="tabNum == 1">Выполнить</button>
    <button type="button" class="btn btn-danger pull-left" ng-disabled="!canCancelEm()"
            ng-click="$close('cancel')"
            ng-if="tabNum == 1">Отменить</button>
    <button type="button" class="btn btn-default pull-left" ng-disabled="!canNewAppointment()"
            ng-click="$close('new_appointment')"
            ng-if="tabNum == 1 && displayNewAppointment()">Записать в расписание</button>
    <button type="button" class="btn btn-default pull-left"
            ng-if="tabNum == 1 && canDelete()"
            ng-click="$close('delete')">Удалить</button>
    <button type="button" class="btn btn-default pull-left"
            ng-if="tabNum == 1 && canRestore()"
            ng-click="$close('restore')">Восстановить</button>
    <button type="button" class="btn btn-default" ng-click="$close()">Закрыть</button>
</div>