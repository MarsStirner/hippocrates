{% extends 'risar/base/base.html' %}
{% import 'risar/_macros.html' as rimacros with context %}
{% import 'risar/_ticket_25_read.html' as ticket with context %}

{% block title %}> Осмотр специалистом ПЦ{% endblock %}

{% block main %}
<div ng-controller="CheckupPCEditCtrl" ng-cloak>
    <section class="content-header" ng-controller="RisarHeaderCtrl">
        {{ rimacros.page_title_n('Осмотр специалистом ПЦ') }}
        {{ rimacros.navigation('[[ event_id ]]') }}
    </section>
    <section class="content">
        <tabset>
            <tab heading="Данные женщины">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Общая информация</h3>
                                <a class="print_link pull-right" ng-if="canEditCheckup()"
                                   href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_common">
                                    <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                            </div>
                            <div class="box-body">
                                <div class="row">
                                    <div class="col-sm-3 col-md-3  text-right">Дата осмотра:</div>
                                    <div class="col-sm-9 col-md-9">[[checkup.beg_date|asDateTime]]</div>
                                </div>
                                {% if 'department' in checkup_descriptor %}
                                <div class="row" ng-if="checkupDescriptor.exists('department')">
                                    <div class="col-sm-6 col-md-6 text-right">[[ checkupDescriptor.getName('department') ]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.department.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'height' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-3 col-md-3  text-right">[[checkupDescriptor.getName('height')]]:</div>
                                    <div class="col-sm-9 col-md-9">
                                        [[checkup.height]]
                                    </div>
                                </div>
                                {% endif %}
                                {% if 'weight' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-3 col-md-3  text-right">[[checkupDescriptor.getName('weight')]]:</div>
                                    <div class="col-sm-9 col-md-9">[[checkup.weight]]</div>
                                </div>
                                {% endif %}
                                {% if 'hw_ratio' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-3 col-md-3  text-right">[[checkupDescriptor.getName('hw_ratio')]]:</div>
                                    <div class="col-sm-9 col-md-9">[[checkup.hw_ratio]]</div>
                                </div>
                                {% endif %}
                                {% if 'BMI' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-3 col-md-3  text-right">[[checkupDescriptor.getName('BMI')]]:</div>
                                    <div class="col-sm-9 col-md-9 long-words">
                                        [[checkup.BMI]]
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Соматический статус</h3>
                                <a class="print_link pull-right" ng-if="canEditCheckup()"
                                   href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_somatic">
                                    <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                            </div>
                            <div class="box-body">
                                {% if 'state' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('state')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.state.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'tongue' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('tongue')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.tongue" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'subcutaneous_fat' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('subcutaneous_fat')]]:</div>
                                    <div class="col-sm-7 col-md-7 ">[[checkup.subcutaneous_fat.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'vein' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('vein')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.vein.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'edema' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('edema')]]:</div>
                                    <div class="col-sm-7 col-md-7 long-words" ng-bind-html="checkup.edema"></div>
                                </div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">АД правая рука:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.ad_right_high]]/[[checkup.ad_right_low]]</div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">АД левая рука:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.ad_left_high]]/[[checkup.ad_left_low]]</div>
                                </div>
                                {% if 'heart_rate' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('heart_rate')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.heart_rate]]</div>
                                </div>
                                {% endif %}
                                {% if 'pulse' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('pulse')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.pulse" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'complaints' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('complaints')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.complaints" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'skin' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('skin')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.skin" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'lymph' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('lymph')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.lymph" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'heart_tones' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('heart_tones')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.heart_tones" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'breast' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('breast')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.breast" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'nipples' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('nipples')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.nipples" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'breathe' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('breathe')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.breathe" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'stomach' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('stomach')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.stomach" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'liver' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('liver')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.liver" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'urinoexcretory' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('urinoexcretory')]]:</div>
                                    <div class="col-sm-7 col-md-7"><span ng-repeat="elem in checkup.urinoexcretory" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                </div>
                                {% endif %}
                                {% if 'bowel_and_bladder_habits' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('bowel_and_bladder_habits')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.bowel_and_bladder_habits]]</div>
                                </div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Акушерский статус</h3>
                                <a class="print_link pull-right" ng-if="canEditCheckup()"
                                   href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_obstetrician">
                                    <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                            </div>
                            <div class="box-body">
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right"><b>Ромб Михаэлиса</b></div>
                                    <div class="col-sm-6 col-md-6"></div>
                                </div>
                                {% if 'MikHHor' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('MikHHor')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.MikHHor]]</div>
                                </div>
                                {% endif %}
                                {% if 'MikhVert' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('MikhVert')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.MikhVert]]</div>
                                </div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right"><b>Размеры таза</b></div>
                                    <div class="col-sm-6 col-md-6"></div>
                                </div>
                                {% if 'DsSP' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('DsSP')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.DsSP]]</div>
                                </div>
                                {% endif %}
                                {% if 'DsCr' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('DsCr')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.DsCr]]</div>
                                </div>
                                {% endif %}
                                {% if 'DsTr' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('DsTr')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.DsTr]]</div>
                                </div>
                                {% endif %}
                                {% if 'CExt' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('CExt')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.CExt]]</div>
                                </div>
                                {% endif %}
                                {% if 'CDiag' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('CDiag')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.CDiag]]</div>
                                </div>
                                {% endif %}
                                {% if 'CVera' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('CVera')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.CVera]]</div>
                                </div>
                                {% endif %}
                                {% if 'soloviev_index' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('soloviev_index')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.soloviev_index]]</div>
                                </div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right"><b>Форма таза</b></div>
                                    <div class="col-sm-6 col-md-6"></div>
                                </div>
                                {% if 'pelvis_narrowness' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('pelvis_narrowness')]]:</div>
                                    <div class="col-sm-6 col-md-6 long-words">[[checkup.pelvis_narrowness.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'pelvis_form' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('pelvis_form')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.pelvis_form.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'abdominal' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('abdominal')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.abdominal]]</div>
                                </div>
                                {% endif %}
                                {% if 'fundal_height' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('fundal_height')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.fundal_height]]</div>
                                </div>
                                {% endif %}
                                {% if 'metra_state' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 text-right">[[checkupDescriptor.getName('metra_state')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.metra_state.name]]</div>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Влагалищное исследование</h3>
                                <a class="print_link pull-right" ng-if="canEditCheckup()"
                                   href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_vagina">
                                    <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                            </div>
                            <div class="box-body">
                                {% if 'externalia' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('externalia')]]:</div>
                                    <div class="col-sm-7 col-md-7 long-words">[[checkup.externalia]]</div>
                                </div>
                                {% endif %}
                                {% if 'vagina' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('vagina')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.vagina.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'cervix' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervix')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervix.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'cervix_length' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervix_length')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervix_length.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'cervix_position' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervix_position')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervix_position.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'cervix_maturity' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervix_maturity')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervix_maturity.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'cervix_consistency' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervix_consistency')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervix_consistency.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'cervical_canal' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervical_canal')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervical_canal.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'body_of_womb' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('body_of_womb')]]:</div>
                                    <div class="col-sm-7 col-md-7">
                                        <span ng-repeat="elem in checkup.body_of_womb" >[[elem.name]][[$last ? '' : ', ']]</span>
                                    </div>
                                </div>
                                {% endif %}
                                {% if 'appendages' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('appendages')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.appendages.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'parametrium' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('parametrium')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.parametrium.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'features' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('features')]]:</div>
                                    <div class="col-sm-7 col-md-7 long-words" ng-bind-html="checkup.features"></div>
                                </div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right"><b>Взято на анализ</b></div>
                                    <div class="col-sm-7 col-md-7"></div>
                                </div>
                                {% if 'vagina_secretion' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('vagina_secretion')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.vagina_secretion ? 'да': 'нет']]</div>
                                </div>
                                {% endif %}
                                {% if 'cervical_canal_secretion' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('cervical_canal_secretion')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.cervical_canal_secretion ? 'да': 'нет']]</div>
                                </div>
                                {% endif %}
                                {% if 'urethra_secretion' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('urethra_secretion')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.urethra_secretion ? 'да': 'нет']]</div>
                                </div>
                                {% endif %}
                                {% if 'onco_smear' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 text-right">[[checkupDescriptor.getName('onco_smear')]]:</div>
                                    <div class="col-sm-7 col-md-7">[[checkup.onco_smear ? 'да': 'нет']]</div>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Заключение</h3>
                                <a class="print_link pull-right" ng-if="canEditCheckup()"
                                   href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_conclusion">
                                    <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                            </div>
                            <div class="box-body">
                                <!-- TODO: Отображение диагнозов -->
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">Основной диагноз:</div>
                                    <div class="col-sm-6 col-md-6">
                                        <div ng-repeat="diag in checkup.diagnoses | collapse_diagnoses:'main'">
                                            [[diag.diagnostic.mkb.code]] - [[diag.diagnostic.mkb.name]]
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">Сопутствующие диагнозы:</div>
                                    <div class="col-sm-6 col-md-6">
                                        <div ng-repeat="diag in checkup.diagnoses | collapse_diagnoses:'associated'">
                                            [[diag.diagnostic.mkb.code]] - [[diag.diagnostic.mkb.name]]
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">Диагноз осложнения:</div>
                                    <div class="col-sm-6 col-md-6">
                                        <div ng-repeat="diag in checkup.diagnoses | collapse_diagnoses:'complication'">
                                            [[diag.diagnostic.mkb.code]] - [[diag.diagnostic.mkb.name]]
                                        </div>
                                    </div>
                                </div>
                                {% if 'pregnancy_week' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('pregnancy_week')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.pregnancy_week]]</div>
                                </div>
                                {% endif %}
                                {% if 'pregnancy_continuation' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('pregnancy_continuation')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.pregnancy_continuation ? 'да': 'нет']]</div>
                                </div>
                                {% endif %}
                                {% if 'pregnancy_continuation_refusal' in checkup_descriptor %}
                                <div class="row" ng-show="!pregContRefusalDisabled()">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('pregnancy_continuation_refusal')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.pregnancy_continuation_refusal ? 'да': 'нет']]</div>
                                </div>
                                {% endif %}
                                {% if 'craft' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('craft')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.craft.name]]</div>
                                </div>
                                {% endif %}
                                {% if 'next_date' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('next_date')]]:</div>
                                    <div class="col-sm-6 col-md-6">[[checkup.next_date|asDate]]</div>
                                </div>
                                {% endif %}
                                {% if 'notes' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('notes')]]:</div>
                                    <div class="col-sm-6 col-md-6 long-words" ng-bind-html="checkup.notes"></div>
                                </div>
                                {% endif %}
                                {% if 'recommendations' in checkup_descriptor %}
                                <div class="row">
                                    <div class="col-sm-6 col-md-6  text-right">[[checkupDescriptor.getName('recommendations')]]:</div>
                                    <div class="col-md-6 long-words" ng-bind-html="checkup.recommendations"></div>
                                </div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">&nbsp;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- START TICKET 25 -->
                    <div class="col-md-12">
                        {{ ticket.ticket_25_read(url_for('.html_inspection_pc_edit'))}}
                    </div>
                    <!-- END TICKET 25 -->
                    <div class="col-md-12">
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Мероприятия</h3>
                                <a class="print_link pull-right" ng-if="canEditCheckup()"
                                   href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_diagnostic">
                                    <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                            </div>
                            <div class="box-body">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th width="30%">Название мероприятия</th>
                                            <th>Дата начала</th>
                                            <th>Дата окончания</th>
                                            <th>Статус</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="measure in checkup.measures" ng-class="{ 'measure-manual': !measure.data.scheme }">
                                            <td><span ng-bind="measure.data.measure.name"></span>
                                            </td>
                                            <td>[[ measure.data.beg_datetime | asDateTime ]]</td>
                                            <td>[[ measure.data.end_datetime | asDateTime ]]</td>
                                            <td>
                                                <event-measure-status status="measure.data.status"></event-measure-status>
                                                <span ng-if="emIsNotActual(em)">(Неактуально)</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
            <tab heading="Данные плода">
                <div class="row">
                    <div class="col-md-6">
                        <div ng-class="{'active': $index==0}" class="tab-pane" id="fetus[[$index+1]]"
                             ng-repeat="child in checkup.fetuses | flt_not_deleted">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Плод [[$index+1]]</h3>
                                    <a class="print_link pull-right" ng-if="canEditCheckup()"
                                       href="{{ url_for('.html_inspection_pc_edit') }}?event_id=[[ header.event.id ]]&checkup_id=[[ checkup.id ]]#tab_fetus[[$index+1]]">
                                        <span class="glyphicon glyphicon-pencil"></span> Изменить</a>
                                </div>
                                <div class="box-body">
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6 text-right">Положение:</div>
                                        <div class="col-sm-6 col-md-6">[[child.state.position.name]]</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6 text-right">Позиция:</div>
                                        <div class="col-sm-6 col-md-6">[[child.state.position_2.name]]</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6 text-right">Вид плода:</div>
                                        <div class="col-sm-6 col-md-6">[[child.state.type.name]]</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6 text-right">Предлежание:</div>
                                        <div class="col-sm-6 col-md-6">[[child.state.presenting_part.name]]</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6 text-right">Сердцебиение:</div>
                                        <div class="col-sm-6 col-md-6"><span ng-repeat="elem in child.state.heartbeat" >[[elem.name]][[$last ? '' : ', ']]</span></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6 text-right">ЧСС, уд/мин:</div>
                                        <div class="col-sm-6 col-md-6">[[child.state.heart_rate]]</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">&nbsp;</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">&nbsp;</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">&nbsp;</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
        </tabset>
    </section>
</div>
{% endblock %}

{% block modules_js %}
    {{ super() }}
    <script>
        WebMis20.value('checkup_descriptor', angular.fromJson('{{checkup_descriptor|tojson|safe}}'));
        WebMis20.value('ticket_25_descriptor', angular.fromJson('{{ticket_25_descriptor|tojson|safe}}'));
    </script>
    <script src="{{ url_for('.static', filename='js/checkup.js', v=app_version) }}"></script>
    <script src="{{ url_for('.static', filename='js/checkup_pc.js', v=app_version) }}"></script>
    <script src="{{ url_for('.static', filename='js/event_measure/event_measure_info.js', v=app_version) }}"></script>
    <script src="{{ url_for('.static', filename='js/event_measure/em_action_view.js', v=app_version) }}"></script>
{% endblock %}