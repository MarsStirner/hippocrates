{% extends 'risar/base/base.html' %}
{% import 'risar/_macros.html' as rimacros with context %}

{% block title %}> Осмотры плода{% endblock %}

{% block main %}
<div ng-controller="InspectionFetusViewCtrl" ng-cloak>
    <section class="content-header" ng-controller="RisarHeaderCtrl">
        {{ rimacros.page_title_ext_n('Осмотры плода беременной', 'inspection_fetus') }}
        {{ rimacros.navigation('[[ header.event.id ]]') }}
    </section>
    <section class="content">
        <div class="box box-primary">
        <div class="box-body">
        <table class="table">
            <tbody>
                <tr>
                    <th width="280px">Дата первого шевеления</th>
                    <td> [[ checkup.fetus_first_movement_date ]]</td>
                    <td></td>
                </tr>
                <tr>
                    <th>Шевеление</th>
                    <td> [[ checkup.fetus_movement ]]</td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        </div>
        </div>

        <div class="box box-primary">
        <div class="box-body" ng-repeat="child in checkup.fetuses" ng-controller="CheckupBaseChildCtrl">
        <table class="table">
            <thead>
                <tr>
                    <th width="280px">Плод [[$index + 1]]</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>Положение</th>
                    <td> [[ child.state.position.name ]]</td>
                    <td></td>
                </tr>
                <tr>
                    <th>Позиция</th>
                    <td> [[ child.state.position_2.name ]]</td>
                    <td></td>
                </tr>
                <tr>
                    <th>Вид плода</th>
                    <td> [[ child.state.type.name ]]</td>
                    <td></td>
                </tr>
                <tr>
                    <th>Предлежание</th>
                    <td> [[ child.state.presenting_part.name ]]</td>
                    <td></td>
                </tr>
                <tr>
                    <th>Задержка в развитии</th>
                    <td> [[ child.state.delay.name ]]</td>
                    <td></td>
                </tr>
                <tr>
                    <th>Сердцебиение</th>
                    <td> <span ng-repeat="elem in child.state.heartbeat" >[[elem.name]][[$last ? '' : ', ']]</span></td>
                    <td></td>
                </tr>
                <tr>
                    <th>ЧСС, уд/мин</th>
                    <td> [[ child.state.heart_rate ]]</td>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher || isStv">
                    <th>Данные КТГ</th>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher">
                    <td><span class="small-left-margin">Базальный ритм</span></td>
                    <td> [[ child.state.basal.name ]]</td>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher">
                    <td><span class="small-left-margin">Вариабельность (амплитуда)</span></td>
                    <td> [[ child.state.variability_range.name ]]</td>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher">
                    <td><span class="small-left-margin">Вариабельность (частота в минуту)</span></td>
                    <td> [[ child.state.frequency_per_minute.name ]]</td>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher">
                    <td><span class="small-left-margin">Акселерации за 30 минут</span></td>
                    <td> [[ child.state.acceleration.name ]]</td>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher">
                    <td><span class="small-left-margin">Децелерации за 30 минут</span></td>
                    <td> [[ child.state.deceleration.name ]]</td>
                    <td></td>
                </tr>
                <tr ng-show="isPhisher">
                    <td><span class="small-left-margin">Оценка КТГ по Фишеру:</span></td>
                    <td>
                        <span ng-bind="child.state.fisher_ktg_points"></span>
                        <span ng-if="child.state.fisher_ktg_rate">
                            (<span  ng-bind="child.state.fisher_ktg_rate.name|lowercase"></span>)
                        </span>
                    </td>
                    <td></td>
                </tr>
                <tr ng-show="isStv">
                    <td><span class="small-left-margin">Оценка по STV:</span></td>
                    <td> [[ child.state.stv_evaluation ]]</td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        </div>
        </div>
    </section>
</div>
{% endblock %}

{% block modules_js %}
    {{ super() }}
    <script src="{{ url_for('.static', filename='js/chart.js', v=app_version) }}"></script>
    <script src="{{ url_for('.static', filename='js/checkup.js', v=app_version) }}"></script>
    <script src="{{ url_for('.static', filename='js/common.js', v=app_version) }}"></script>
{% endblock %}